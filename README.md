# CarTaxBot
Таможенный калькулятор для автомобилей 

## Описание 

Калькулятор представлен в виде Telegram-бота (@car_tax_bot) и административной панели Django и предназначен для вычисления таможенных платежей при ввозе автомобилей в РФ из-за границы. Бот также позволяет оставить заявку для связи клиента и менеджера и уточнения деталей.

## Telegram-бот

Бот имеет 4 команды: 
- `/start` - Старт
- `/calc` - Рассчитать пошлину
- `/currency` - Получить курсы валют
- `/feedback` - Оставить заявку

### Команда `/start` 

При нажатии на команду `/start` пользователю присылается сообщение с описанием возможностей бота и контактными данными компании, а также 3 Inline-кнопками: 

1. **Рассчитать пошлину**
2. **Получить курсы валют**
3. **Оставить заявку**

Назначение кнопок такое же, как у одноимённых команд. 

### Команда `/calc` 

При нажатии на команду `/calc` запускается процесс расчёта пошлины. Запрашиваются следующие параметры: 

1. **Тип ТС (транспортного средства)**  
   - Легковой  
   - Снегоход  
   - Квадроцикл  
2. **Валюта, в которой будет введена стоимость авто**  
   - Юань  
   - Иена  
   - Вона  
   - Доллар  
   - Евро  
   - Рубль  
3. **Стоимость авто**  
4. **Объём двигателя**  
5. **Тип двигателя**  
   - Бензин  
   - Дизель  
   - Гибрид параллельный  
   - Гибрид последовательный  
   - Электро  
6. **Кто ввозит**  
   - Физическое лицо  
     - Если тип двигателя - **электро**, запрашивается **мощность**  
   - Юридическое лицо  
     - Запрашивается **мощность** (для любого типа двигателя)  
7. **Возраст**  
   - Меньше 3-х лет  
   - 3-5 лет  
   - 5-7 лет  
   - Больше 7 лет  

Данные о курсах валют получаются по Центральному банку РФ из этого API:  
[http://193.164.149.51/currencies/get-exchange-rates-from-cbr/](http://193.164.149.51/currencies/get-exchange-rates-from-cbr/)

### Команда `/currency` 

Показывает текущие курсы валют с указанием даты последнего обновления. 

### Команда `/feedback` 

Запускает процесс оставления заявки. Нужно указать **имя** и **телефон**. 

## Административная панель 

### Клиенты

В административной панели хранятся все клиенты, которые когда-либо писали боту. Они имеют следующие данные: 
- **Telegram ID**
- **Telegram username** (если есть)
- **Имя** (если клиент хотя бы раз оставлял заявку)
- **Телефон** (если клиент хотя бы раз оставлял заявку)
- **Статус** (`start` / `calc`)

По умолчанию клиент получает статус `start`, а как только он хотя бы раз произведёт расчёт пошлины в боте - получает статус `calc`. 

### Расчёты

Все расчёты, которые клиенты выполняют в боте, также хранятся в административной панели и имеют один из трёх статусов: 
- `open`
- `progress`
- `done`

По умолчанию ставится статус `open`.

### Уведомления 

В административной панели можно настроить пользователей-администраторов. Для этих пользователей в Telegram будут приходить уведомления о новых заявках, оставленных через бота. 

Для этого нужно указать **Telegram ID** администраторов в разделе **"Уведомления - Получатели"**.
